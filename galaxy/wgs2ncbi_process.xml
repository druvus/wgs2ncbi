<tool id="wgs2ncbi_process" name="FASTA Index" version="1.0.0">
  <description>indexes sequence data</description>
  <command>
    bash '$__tool_directory__/wgs2ncbi_process.sh' '$fasta' '$config_ini' '$info' '$masks' '$products' '$gff3' '$out_file'
  </command>
  <inputs>
    <param name="fasta" format="fasta" type="data" label="FASTA sequences file" />
    <!-- add prefix and authority -->
    <param name="info" format="txt" type="data" label="INI info file" />
    <param name="masks" format="txt" type="data" label="INI masks file" />
    <param name="products" format="txt" type="data" label="INI products file" />
    <param name="gff3" type="data" label="Indexed GFF3 file" />
  </inputs>
  <configfiles>
    <configfile name="config_ini">
; The preferred source whose annotations to use.
source=maker

; Feature types to retain during pre-processing.
feature=CDS
feature=gene
feature=five_prime_UTR
feature=three_prime_UTR

; Verbosity. Can be 0, (errors only), 1 (also warnings), 2 (also info messages) or 
; 3 (also debugging messages)
verbosity=0

; Logging complexity. 0=only show log level and message; 1=also show fully qualified 
; method name, code file and line number
complexity=1  
    </configfile>
  </configfiles>  
  <outputs>
    <data name="out_file" />
  </outputs>
  <help>
**What it does**

This tool is part of the WGS2NCBI pipeline, which prepares the annotated results of whole 
genome sequencing (WGS) for submission to NCBI. In this step of the pipeline, the 
genome sequences are processed:

- The sequence definition lines are enriched with the information from the **Info file**
- Any sequence fragments identified in the **Masks** file are blanked out with NNNs
- NCBI feature tables are generated, with sanitized product names generated using the
  mappings in the **Products file**

-----

**INI input files**

- **Project file** This file contains the project-level settings, such as the 
  the identifier prefix generated by NCBI and the naming authority prefix for internal
  IDs
- **Info file** Contains information about the assay, such as the organism that was
  sequenced, its sex, tissue, and so on
- **Masks file** Contains the coordinates of sequence fragments to mask, such as 
  adaptors, contaminations, and so on
- **Products file** Contains mappings between 'illegal' product names and sanitized ones

-----

**Input data files**

- **FASTA sequence file** Contains the genome sequence data in FASTA format. This file
  will contain multiple records, which might be contigs, scaffolds, or chromosomes. The
  first "word" of each FASTA record (so, the thing that comes immediately after the '>'
  sign) must match the names in the GFF3 annotation file exactly.
- **Indexed GFF3 file** Is a compressed archive of annotation files as produced by the
  `GFF3 Index` step.

  </help>
  <!--citations>
    <citation type="doi">10.1007/11732990_17</citation>
  </citations-->
</tool>
